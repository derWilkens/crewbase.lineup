<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://editorCaption"
        class="eu.crewbase.lineup.web.crewchangecreatedto.CrewChangeCreateDTOEdit"
        datasource="crewChangeCreateDTODs"
        messagesPack="eu.crewbase.lineup.web.crewchangecreatedto">
    <dsContext>
        <datasource id="crewChangeCreateDTODs"
                    class="eu.crewbase.lineup.entity.dto.CrewChangeCreateDTO"/>
        <datasource id="crewChangeDs"
                    class="eu.crewbase.lineup.entity.wayfare.CrewChange"
                    view="crewChange-transfer-waypoint-edit-view"/>
        <collectionDatasource id="craftTypesDs"
                              class="eu.crewbase.lineup.entity.coredata.CraftType"
                              view="craftType-select">
            <query>
                <![CDATA[select e from lineup$CraftType e where e.modeOfTransfer.id = :ds$modeOfTransferDs.id]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="modeOfTransferDs"
                              class="eu.crewbase.lineup.entity.coredata.ModeOfTransfer"
                              view="_local">
            <query>
                <![CDATA[select e from lineup$ModeOfTransfer e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="airportDs"
                              class="eu.crewbase.lineup.entity.coredata.Site"
                              view="siteSelect">
            <query>
                <![CDATA[select e from lineup$Site e where e.siteCategory.categoryName = 'Airport']]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="platformDs"
                              class="eu.crewbase.lineup.entity.coredata.Site"
                              view="siteSelect">
            <query>
                <![CDATA[select e from lineup$Site e where e.siteCategory.categoryName = 'Helideck']]>
            </query>
        </collectionDatasource>
    </dsContext>
    <dialogMode closeable="true"
                forceDialog="true"
                height="600"
                resizable="true"
                width="800"/>
    <layout expand="windowActions"
            spacing="true">
        <vbox spacing="true">
            <groupBox caption="Take Off"
                      orientation="horizontal"
                      spacing="true">
                <dateField id="fligthDate"
                           datasource="crewChangeCreateDTODs"
                           property="startDateTime"
                           resolution="DAY"
                           responsive="true"/>
                <timeField id="takeOff"
                           datasource="crewChangeCreateDTODs"
                           property="startDateTime"/>
            </groupBox>
            <groupBox caption="Trip"
                      orientation="horizontal"
                      spacing="true">
                <lookupField id="departure"
                             caption="Departure "
                             datasource="crewChangeCreateDTODs"
                             inputPrompt="(start typing...)"
                             nullOptionVisible="false"
                             optionsDatasource="airportDs"
                             property="departureSite"/>
                <lookupField id="destination"
                             caption="Main Destination"
                             datasource="crewChangeCreateDTODs"
                             inputPrompt="(start typing...)"
                             nullOptionVisible="false"
                             optionsDatasource="platformDs"
                             property="destinationSite"/>
            </groupBox>
        </vbox>
        <groupBox caption="Transportation"
                  orientation="horizontal"
                  spacing="true">
            <optionsGroup optionsDatasource="modeOfTransferDs"
                          orientation="horizontal"/>
            <lookupField optionsDatasource="modeOfTransferDs"/>
            <lookupField id="craftType"
                         captionProperty="name"
                         datasource="crewChangeCreateDTODs"
                         inputPrompt="Helicopter Type"
                         optionsDatasource="craftTypesDs"
                         property="craftType"/>
        </groupBox>
        <groupBox caption="Booked Seats"
                  orientation="horizontal"
                  spacing="true">
            <lookupField id="bookedSeatsOutbound"
                         caption="Outbound"
                         datasource="crewChangeCreateDTODs"
                         icon="font-icon:ARROW_UP"
                         property="bookedSeatsOutbound"/>
            <lookupField id="bookedSeatsInbound"
                         caption="Inbound"
                         datasource="crewChangeCreateDTODs"
                         datatype="int"
                         icon="font-icon:ARROW_DOWN"
                         property="bookedSeatsInbound"/>
        </groupBox>
        <frame id="windowActions"
               screen="editWindowActions"/>
    </layout>
</window>
